<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„å½©è‰²åƒç´ ç”»æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            text-align: center;
        }
        
        header {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff7e5f, #feb47b, #86a8e7, #91eae4);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
            margin-bottom: 20px;
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1rem;
            line-height: 1.5;
        }
        
        .color-palette {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin: 25px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            border: 3px solid transparent;
        }
        
        .color-option:hover {
            transform: scale(1.15);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }
        
        .color-option.active {
            border-color: white;
            transform: scale(1.2);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }
        
        .pixel-canvas {
            display: grid;
            grid-template-columns: repeat(16, 1fr);
            gap: 2px;
            background-color: #333;
            padding: 10px;
            border-radius: 8px;
            margin: 0 auto 30px;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .pixel {
            aspect-ratio: 1 / 1;
            background-color: #2a2a2a;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.1s, transform 0.05s;
        }
        
        .pixel:hover {
            transform: scale(1.08);
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        button {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(0, 0, 0, 0.3);
        }
        
        .current-color {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }
        
        .color-display {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            border: 2px solid white;
        }
        
        footer {
            margin-top: 30px;
            padding: 20px;
            opacity: 0.7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }
            
            .pixel-canvas {
                grid-template-columns: repeat(12, 1fr);
                max-width: 360px;
            }
            
            .color-option {
                width: 35px;
                height: 35px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ¨ å½©è‰²åƒç´ ç”»æ¿</h1>
            <p class="subtitle">ç‚¹å‡»é€‰æ‹©é¢œè‰²ï¼Œç„¶ååœ¨ç½‘æ ¼ä¸Šç»˜åˆ¶ä½ çš„åƒç´ è‰ºæœ¯ï¼</p>
        </header>
        
        <div class="instructions">
            <p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong> 1. ä»ä¸‹æ–¹è°ƒè‰²æ¿é€‰æ‹©é¢œè‰² 2. åœ¨ç½‘æ ¼ä¸Šç‚¹å‡»ç»˜åˆ¶ 3. ä½¿ç”¨å³ä¾§å·¥å…·ä¿å­˜æˆ–æ¸…é™¤</p>
        </div>
        
        <div class="current-color">
            <span>å½“å‰é¢œè‰²ï¼š</span>
            <div class="color-display" id="currentColorDisplay"></div>
            <span id="currentColorName">äº®çº¢è‰²</span>
        </div>
        
        <div class="color-palette" id="colorPalette">
            <!-- é¢œè‰²é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="pixel-canvas" id="pixelCanvas">
            <!-- åƒç´ ç½‘æ ¼å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
        
        <div class="controls">
            <button id="clearBtn">ğŸ§¹ æ¸…é™¤ç”»æ¿</button>
            <button id="saveBtn">ğŸ’¾ ä¿å­˜å›¾ç‰‡</button>
            <button id="randomBtn">ğŸ² éšæœºå›¾æ¡ˆ</button>
            <button id="toggleGridBtn">ğŸ”² éšè—ç½‘æ ¼</button>
        </div>
        
        <footer>
            <p>ä½¿ç”¨çº¯HTMLã€CSSå’ŒJavaScriptæ„å»º | å·²éƒ¨ç½²åˆ°Cloudflare Pages</p>
            <p>æç¤ºï¼šå°è¯•ç»˜åˆ¶ä¸€ä¸ªç®€å•çš„å›¾æ¡ˆï¼Œæ¯”å¦‚æ˜Ÿæ˜Ÿã€çˆ±å¿ƒæˆ–ä½ çš„åå­—é¦–å­—æ¯ï¼</p>
        </footer>
    </div>

    <script>
        // é¢œè‰²é…ç½®
        const colors = [
            { name: "äº®çº¢è‰²", value: "#FF6B6B" },
            { name: "æ©™é»„è‰²", value: "#FFA726" },
            { name: "æŸ æª¬é»„", value: "#FFEE58" },
            { name: "å«©ç»¿è‰²", value: "#9CCC65" },
            { name: "å¤©ç©ºè“", value: "#4FC3F7" },
            { name: "æ·±è“è‰²", value: "#5C6BC0" },
            { name: "ç´«è‰²", value: "#AB47BC" },
            { name: "ç²‰è‰²", value: "#F48FB1" },
            { name: "ç™½è‰²", value: "#FFFFFF" },
            { name: "é»‘è‰²", value: "#000000" },
            { name: "æ£•è‰²", value: "#8D6E63" },
            { name: "ç°è‰²", value: "#BDBDBD" }
        ];
        
        // å½“å‰é€‰ä¸­çš„é¢œè‰²
        let currentColor = colors[0].value;
        let currentColorName = colors[0].name;
        
        // ç½‘æ ¼å°ºå¯¸
        const gridSize = 16;
        
        // åˆå§‹åŒ–å‡½æ•°
        function init() {
            // åˆå§‹åŒ–é¢œè‰²é¢æ¿
            const colorPalette = document.getElementById('colorPalette');
            colors.forEach(color => {
                const colorOption = document.createElement('div');
                colorOption.className = 'color-option';
                colorOption.style.backgroundColor = color.value;
                colorOption.dataset.color = color.value;
                colorOption.dataset.name = color.name;
                
                // ç‚¹å‡»é€‰æ‹©é¢œè‰²
                colorOption.addEventListener('click', () => {
                    selectColor(color.value, color.name);
                    
                    // ç§»é™¤æ‰€æœ‰é¢œè‰²çš„activeç±»
                    document.querySelectorAll('.color-option').forEach(option => {
                        option.classList.remove('active');
                    });
                    
                    // ä¸ºå½“å‰é€‰ä¸­çš„é¢œè‰²æ·»åŠ activeç±»
                    colorOption.classList.add('active');
                });
                
                colorPalette.appendChild(colorOption);
            });
            
            // é»˜è®¤é€‰ä¸­ç¬¬ä¸€ä¸ªé¢œè‰²
            document.querySelector('.color-option').classList.add('active');
            
            // åˆå§‹åŒ–åƒç´ ç½‘æ ¼
            const pixelCanvas = document.getElementById('pixelCanvas');
            
            // å¦‚æœæ˜¯å°å±å¹•ï¼Œä½¿ç”¨12x12ç½‘æ ¼
            const actualGridSize = window.innerWidth <= 600 ? 12 : gridSize;
            pixelCanvas.style.gridTemplateColumns = `repeat(${actualGridSize}, 1fr)`;
            
            // åˆ›å»ºåƒç´ 
            for (let i = 0; i < actualGridSize * actualGridSize; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.dataset.index = i;
                
                // ç‚¹å‡»ç»˜åˆ¶åƒç´ 
                pixel.addEventListener('click', () => {
                    pixel.style.backgroundColor = currentColor;
                    // æ·»åŠ ä¸€ç‚¹åŠ¨ç”»æ•ˆæœ
                    pixel.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        pixel.style.transform = '';
                    }, 100);
                });
                
                // æ”¯æŒé¼ æ ‡æ‹–æ‹½ç»˜åˆ¶
                let isDrawing = false;
                pixel.addEventListener('mousedown', () => {
                    isDrawing = true;
                    pixel.style.backgroundColor = currentColor;
                });
                
                pixel.addEventListener('mouseover', () => {
                    if (isDrawing) {
                        pixel.style.backgroundColor = currentColor;
                        pixel.style.transform = 'scale(0.95)';
                        setTimeout(() => {
                            pixel.style.transform = '';
                        }, 100);
                    }
                });
                
                pixelCanvas.appendChild(pixel);
            }
            
            // é¼ æ ‡æ¾å¼€æ—¶åœæ­¢ç»˜åˆ¶
            document.addEventListener('mouseup', () => {
                isDrawing = false;
            });
            
            // æ›´æ–°å½“å‰é¢œè‰²æ˜¾ç¤º
            updateCurrentColorDisplay();
            
            // åˆå§‹åŒ–æŒ‰é’®äº‹ä»¶
            initButtons(actualGridSize);
        }
        
        // é€‰æ‹©é¢œè‰²
        function selectColor(color, name) {
            currentColor = color;
            currentColorName = name;
            updateCurrentColorDisplay();
        }
        
        // æ›´æ–°å½“å‰é¢œè‰²æ˜¾ç¤º
        function updateCurrentColorDisplay() {
            const colorDisplay = document.getElementById('currentColorDisplay');
            const colorName = document.getElementById('currentColorName');
            
            colorDisplay.style.backgroundColor = currentColor;
            colorName.textContent = currentColorName;
        }
        
        // åˆå§‹åŒ–æŒ‰é’®åŠŸèƒ½
        function initButtons(gridSize) {
            // æ¸…é™¤ç”»æ¿
            document.getElementById('clearBtn').addEventListener('click', () => {
                const pixels = document.querySelectorAll('.pixel');
                pixels.forEach(pixel => {
                    pixel.style.backgroundColor = '';
                });
            });
            
            // ä¿å­˜å›¾ç‰‡
            document.getElementById('saveBtn').addEventListener('click', saveImage);
            
            // éšæœºå›¾æ¡ˆ
            document.getElementById('randomBtn').addEventListener('click', () => {
                const pixels = document.querySelectorAll('.pixel');
                pixels.forEach(pixel => {
                    // 20%çš„å‡ ç‡å¡«å……é¢œè‰²
                    if (Math.random() < 0.2) {
                        const randomColor = colors[Math.floor(Math.random() * colors.length)].value;
                        pixel.style.backgroundColor = randomColor;
                    } else {
                        pixel.style.backgroundColor = '';
                    }
                });
            });
            
            // åˆ‡æ¢ç½‘æ ¼æ˜¾ç¤º
            let gridVisible = true;
            document.getElementById('toggleGridBtn').addEventListener('click', () => {
                const pixels = document.querySelectorAll('.pixel');
                const button = document.getElementById('toggleGridBtn');
                
                if (gridVisible) {
                    pixels.forEach(pixel => {
                        pixel.style.borderRadius = '0';
                        pixel.style.border = '0.5px solid #222';
                    });
                    button.textContent = 'ğŸ”³ æ˜¾ç¤ºç½‘æ ¼';
                    gridVisible = false;
                } else {
                    pixels.forEach(pixel => {
                        pixel.style.borderRadius = '3px';
                        pixel.style.border = '';
                    });
                    button.textContent = 'ğŸ”² éšè—ç½‘æ ¼';
                    gridVisible = true;
                }
            });
        }
        
        // ä¿å­˜å›¾ç‰‡åŠŸèƒ½
        function saveImage() {
            // åˆ›å»ºä¸´æ—¶canvasæ¥ç»˜åˆ¶åƒç´ ç”»
            const pixelCanvas = document.getElementById('pixelCanvas');
            const pixels = document.querySelectorAll('.pixel');
            const gridSize = Math.sqrt(pixels.length);
            
            // åˆ›å»ºcanvaså…ƒç´ 
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // è®¾ç½®canvaså°ºå¯¸ï¼ˆæ¯ä¸ªåƒç´ æ”¾å¤§10å€ï¼‰
            const pixelSize = 20;
            canvas.width = gridSize * pixelSize;
            canvas.height = gridSize * pixelSize;
            
            // ç»˜åˆ¶èƒŒæ™¯
            ctx.fillStyle = '#333';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶æ¯ä¸ªåƒç´ 
            pixels.forEach((pixel, index) => {
                const row = Math.floor(index / gridSize);
                const col = index % gridSize;
                const color = pixel.style.backgroundColor || '#2a2a2a';
                
                ctx.fillStyle = color;
                ctx.fillRect(col * pixelSize, row * pixelSize, pixelSize, pixelSize);
            });
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const link = document.createElement('a');
            link.download = 'æˆ‘çš„åƒç´ ç”».png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            
            // æç¤ºç”¨æˆ·
            alert('å›¾ç‰‡å·²ä¿å­˜ä¸º"æˆ‘çš„åƒç´ ç”».png"ï¼');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
